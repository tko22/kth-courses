(this["webpackJsonpkth-courses"]=this["webpackJsonpkth-courses"]||[]).push([[0],{20:function(e,t,a){e.exports=a(39)},26:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),o=a.n(r),s=a(7),l=a(4),i=a.n(l),u=a(8),p=a(5),m=a(6),h=a(10),d=a(9),b=a(11),E=(a(26),a(2)),f=c.a.createContext(),v=function(e){var t=e.link,a=e.name;return c.a.createElement(E.b,{to:t},c.a.createElement("button",{type:"button",class:"list-group-item list-group-item-action"},a.split("/")[0],c.a.createElement("br",null),a.split("/")[1]))},g=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={status:"LOADING",htmlList:null},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r,o,s,l,u,p,m,h,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.url.split("/")[1],a=this.props.match.params.code,e.t0=t,e.next=""===e.t0?5:"school"===e.t0?11:"department"===e.t0?17:"search"===e.t0?24:31;break;case 5:return e.next=7,this.context.model.getSchools();case 7:return n=e.sent,r=n.map((function(e){return c.a.createElement(v,{link:"/school/".concat(e.name),name:e.name})})),this.setState({status:"LOADED",htmlList:r}),e.abrupt("break",32);case 11:return e.next=13,this.context.model.getDepatments(a);case 13:return o=e.sent,s=o.map((function(e){return c.a.createElement(E.b,{to:"/department/".concat(e.code,"/").concat(e.name)},c.a.createElement("button",{type:"button",class:"list-group-item list-group-item-action"},e.code,c.a.createElement("br",null),e.name.split("/")[1]))})),this.setState({status:"LOADED",htmlList:s}),e.abrupt("break",32);case 17:return e.next=19,this.context.model.getCourses(a);case 19:return l=e.sent,u=l.courses,p=u.map((function(e){return c.a.createElement(E.b,{to:"/course/".concat(e.code)},c.a.createElement("button",{type:"button",class:"list-group-item list-group-item-action"},e.code,c.a.createElement("br",null),e.title))})),this.setState({status:"LOADED",htmlList:p}),e.abrupt("break",32);case 24:return m=this.props.match.params.input,e.next=27,this.context.model.search(m);case 27:return h=e.sent,d=h.map((function(e){return c.a.createElement(E.b,{to:"/course/".concat(e.code)},c.a.createElement("button",{type:"button",class:"list-group-item list-group-item-action"},e.code,c.a.createElement("br",null),e.title))})),this.setState({status:"LOADED",htmlList:d}),e.abrupt("break",32);case 31:return e.abrupt("break",32);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",{class:"container-fluid"},c.a.createElement("h1",null,"Master's studies"),c.a.createElement("div",{class:"row"},c.a.createElement("div",{class:"list-group mx-auto"},this.state.htmlList),c.a.createElement("p",null,"LOADING"===this.state.status?"Fetching...":"")))}}]),t}(c.a.Component);g.contextType=f;var y=g,k=(a(35),function(e){var t=e.text;return c.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}})}),x=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onCommentInputChange=function(e){a.setState({commentInput:e.target.value})},a.state={status:"LOADING",courseKTH:null,courseDB:null,overallCommentList:null,contentsList:null,examinationList:null,commentInput:null},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.code,e.next=3,this.context.model.getCourseKTH(t);case 3:return a=e.sent,e.next=6,this.context.model.getCourseDBDetails(t);case 6:n=e.sent,this.setState({status:"LOADED",courseKTH:a,courseDB:n});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.courseKTH,a=e.courseDB;return console.log(a),c.a.createElement("div",{class:"container"},c.a.createElement("div",{className:"row"},t&&t.course?c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,t.course.courseCode,": ",t.course.title),t.course.addOn?c.a.createElement(k,{text:t.course.addOn}):"",t.course.applicationInfo?c.a.createElement(k,{text:t.course.applicationInfo.substring(3,t.course.applicationInfo.length-4)}):"",t.course.recruitmentText?c.a.createElement(k,{text:t.course.recruitmentText.substring(3,t.course.recruitmentText.length-4)}):""):null),c.a.createElement("div",{class:"card"},c.a.createElement("div",{class:"card-body"},"Overall rating: ",a?Math.round(a.ratings.reduce((function(e,t){return e+t}),0)/a.ratings.length*100)/100:null)),c.a.createElement("div",{id:"accordion"},c.a.createElement("div",{class:"card"},c.a.createElement("div",{class:"card-header",id:"headingOne"},c.a.createElement("h5",{class:"mb-0"},c.a.createElement("button",{class:"btn collapsed","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},"Overall comments"))),c.a.createElement("div",{id:"collapseOne",class:"collapse","aria-labelledby":"headingOne","data-parent":"#accordion"},c.a.createElement("div",{class:"card-body"},c.a.createElement("div",{class:"input-group mb-3"},c.a.createElement("input",{type:"text",class:"form-control",placeholder:"Input","aria-label":"Input","aria-describedby":"basic-addon2",onChange:this.onCommentInputChange,value:this.state.commentInput}),c.a.createElement("div",{class:"input-group-append"},c.a.createElement("button",{class:"btn btn-dark",type:"button",onClick:this.context.model.comment()},"Comment"))),c.a.createElement("ul",{class:"list-group"})))),c.a.createElement("div",{class:"card"},c.a.createElement("div",{class:"card-header",id:"headingTwo"},c.a.createElement("h5",{class:"mb-0"},c.a.createElement("button",{class:"btn collapsed","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"},"Course contents"))),c.a.createElement("div",{id:"collapseTwo",class:"collapse","aria-labelledby":"headingTwo","data-parent":"#accordion"},c.a.createElement("div",{class:"card-body"},c.a.createElement("div",{class:"input-group mb-3"},c.a.createElement("input",{type:"text",class:"form-control",placeholder:"Input","aria-label":"Input","aria-describedby":"basic-addon2",onChange:this.onCommentInputChange,value:this.state.commentInput}),c.a.createElement("div",{class:"input-group-append"},c.a.createElement("button",{class:"btn btn-dark",type:"button",onClick:this.context.model.comment()},"Comment"))),c.a.createElement("ul",{class:"list-group"})))),c.a.createElement("div",{class:"card"},c.a.createElement("div",{class:"card-header",id:"headingThree"},c.a.createElement("h5",{class:"mb-0"},c.a.createElement("button",{class:"btn collapsed","data-toggle":"collapse","data-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree"},"Examination"))),c.a.createElement("div",{id:"collapseThree",class:"collapse","aria-labelledby":"headingThree","data-parent":"#accordion"},c.a.createElement("div",{class:"card-body"},c.a.createElement("div",{class:"input-group mb-3"},c.a.createElement("input",{type:"text",class:"form-control",placeholder:"Input","aria-label":"Input","aria-describedby":"basic-addon2",onChange:this.onCommentInputChange,value:this.state.commentInput}),c.a.createElement("div",{class:"input-group-append"},c.a.createElement("button",{class:"btn btn-dark",type:"button",onClick:this.context.model.comment()},"Comment"))),c.a.createElement("ul",{class:"list-group"}))))))}}]),t}(c.a.Component);x.contextType=f;var C=x,O=(a(36),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).onSearchInputChange=function(e){a.setState({searchInput:e.target.value})},a.search=function(){Object(s.e)().push("/search/".concat(a.state.searchInput))},a.state={searchInput:"Input"},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"header",class:"header d-flex align-items-center justify-content-center container-fluid"},c.a.createElement("div",{class:"row"},c.a.createElement("h1",{class:"display-4 mx-auto"},c.a.createElement(E.b,{to:"/"},"COURSE RATE")),c.a.createElement("div",{class:"input-group mb-3"},c.a.createElement("input",{type:"text",class:"form-control",placeholder:"Input","aria-label":"Input","aria-describedby":"basic-addon2",onChange:this.onSearchInputChange,value:this.state.searchInput}),c.a.createElement("div",{class:"input-group-append"},c.a.createElement("button",{class:"btn btn-dark",type:"button",onClick:this.search},"Search")))))}}]),t}(c.a.Component));O.contextType=f;var I=O,w="https://www.kth.se/api/kopps/v2",D="https://cors-anywhere.herokuapp.com/",j={method:"GET",mode:"cors",headers:{"Access-Control-Allow-Origin":"*"}},T="kth-courses-backend.tko.now.sh/api/courses",L=new(function(){function e(){Object(p.a)(this,e)}return Object(m.a)(e,[{key:"processResponse",value:function(e){if(e.ok)return e.json();throw e}},{key:"getSchools",value:function(){return fetch("".concat(D).concat(w,"/schools?l=en"),j).then(this.processResponse).catch((function(e){console.error("Error:",e)}))}},{key:"getDepatments",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(D).concat(w,"/departments?l=en"),j).then(this.processResponse).then((function(e){return e.filter((function(e){return e.name.split("/")[0]===t}))})).catch((function(e){console.error("Error:",e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCourses",value:function(e){return fetch("".concat(D).concat(w,"/courses/").concat(e,".json?l=en"),j).then(this.processResponse).catch((function(e){console.error("Error:",e)}))}},{key:"getCourses2",value:function(e){return fetch("".concat(D).concat(w,"/courses?l=en"),j).then(this.processResponse).then((function(t){return t.filter((function(t){return t.department.split(" ")[0]===e&&"CANCELLED"!==t.state}))})).catch((function(e){console.error("Error:",e)}))}},{key:"getCourseKTH",value:function(e){return fetch("".concat(D).concat(w,"/course/").concat(e,"/detailedinformation?l=en"),j).then(this.processResponse).catch((function(e){console.error("Error:",e)}))}},{key:"search",value:function(e){return fetch("".concat(D).concat(w,"/courses/search?text_pattern=").concat(e),j).then(this.processResponse).catch((function(e){console.error("Error:",e)}))}},{key:"getAllCoursesDB",value:function(){return fetch("".concat(T)).then(this.processResponse).catch((function(e){console.error("Error:",e)}))}},{key:"getCourseDBDetails",value:function(e){return fetch("".concat(T,"/DH2642")).then(this.processResponse).catch((function(e){console.error("Error:",e)}))}},{key:"comment",value:function(){}}]),e}());a(37);var A=function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},c.a.createElement(I,null),c.a.createElement(f.Provider,{value:{model:L}},c.a.createElement(s.a,{exact:!0,path:"/",component:y}),c.a.createElement(s.a,{path:"/school/:code/:name",component:y}),c.a.createElement(s.a,{path:"/department/:code/:schoolCode/:name",component:y}),c.a.createElement(s.a,{path:"/search/:input",component:y}),c.a.createElement(s.a,{path:"/course/:code",component:C}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(38);o.a.render(c.a.createElement(E.a,null,c.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[20,1,2]]]);
//# sourceMappingURL=main.c7a8a0d9.chunk.js.map